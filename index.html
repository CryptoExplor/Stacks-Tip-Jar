<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Stacks Tip Jar - Clarity 4 Enhanced</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="Send STX tips with memos on Bitcoin L2 - Built with Clarity 4" />
  <meta name="keywords" content="stacks, bitcoin, tip jar, cryptocurrency, STX, clarity4, web3, memos" />
  
  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://stacks-chi.vercel.app" />
  <meta property="og:title" content="Stacks Tip Jar - Clarity 4 Enhanced" />
  <meta property="og:description" content="Send STX tips with custom memos and messages on Bitcoin L2" />
  <meta property="og:image" content="https://stacks-chi.vercel.app/og-image.png" />
  
  <!-- PWA Support -->
  <meta name="theme-color" content="#667eea" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon.svg" />
  <link rel="apple-touch-icon" href="/icon.png" />
  
  <!-- Styles -->
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="header-logo">
        <img src="/icon.png" alt="Stacks Tip Jar" class="logo-icon" />
        <h1>Stacks Tip Jar</h1>
        <span class="clarity4-badge">Clarity 4</span>
      </div>
      <p class="subtitle">Send STX tips with memos â€¢ Built on Bitcoin L2</p>
    </header>

    <!-- Wallet Info -->
    <div class="wallet-info" id="walletInfo">
      <div class="wallet-info-header">
        <strong>Connected Wallet</strong>
        <span class="wallet-badge" id="walletBadge"></span>
      </div>
      <div class="wallet-address" id="walletAddress"></div>
      <div class="premium-status" id="premiumStatus" style="display: none;">
        <span class="premium-icon">ğŸ‘‘</span>
        <span class="premium-text">Premium Tipper</span>
      </div>
    </div>

    <!-- Stats Section -->
    <div class="stats" id="stats">
      <div class="stat-row">
        <span class="stat-label">Network:</span>
        <span class="stat-value" id="networkDisplay">Testnet</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Contract Balance:</span>
        <span class="stat-value" id="contractBalance">--</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Total Tips Received:</span>
        <span class="stat-value" id="totalTips">--</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Total Tippers:</span>
        <span class="stat-value" id="totalTippers">--</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Total Transactions:</span>
        <span class="stat-value" id="totalTransactions">--</span>
      </div>
      <div class="stat-row" id="userStatsRow" style="display: none;">
        <span class="stat-label">Your Total Tips:</span>
        <span class="stat-value" id="userTotalTips">--</span>
      </div>
    </div>

    <!-- Connect Wallet Section -->
    <div id="connectSection" class="show">
      <label class="section-label">Connect Your Wallet</label>
      <div class="wallet-buttons">
        <button class="wallet-btn" id="leatherBtn">
          <span class="wallet-icon">ğŸ¦Š</span>
          <span>Leather</span>
        </button>
        <button class="wallet-btn" id="xverseBtn">
          <span class="wallet-icon">âš¡</span>
          <span>Xverse</span>
        </button>
      </div>
      
      <div class="install-notice" id="installNotice">
        ğŸ’¡ Don't have a wallet? Install 
        <a href="https://leather.io" target="_blank" rel="noopener">Leather</a> or 
        <a href="https://xverse.app" target="_blank" rel="noopener">Xverse</a>
      </div>
    </div>

    <!-- Tip Section -->
    <div id="tipSection">
      <!-- Faucet Section (testnet only) -->
      <div id="faucetSection" class="faucet-section" style="display: none;">
        <div class="faucet-info">
          <span class="faucet-icon">ğŸ’°</span>
          <span class="faucet-text">Need testnet STX? Claim from faucet!</span>
        </div>
        <button class="btn btn-faucet" id="faucetBtn">
          <span class="btn-icon">ğŸ’°</span>
          <span>Claim 500 STX from Faucet</span>
        </button>
      </div>

      <!-- Clarity 4 Feature Badge -->
      <div class="clarity4-features">
        <h3>âœ¨ Clarity 4 Features Active</h3>
        <div class="feature-tags">
          <span class="feature-tag">ğŸ“ On-chain Memos</span>
          <span class="feature-tag">ğŸ’¬ Custom Messages</span>
          <span class="feature-tag">ğŸ” Consensus Hashing</span>
        </div>
      </div>

      <div class="input-group">
        <label class="section-label">Quick Amounts</label>
        <div class="quick-amounts">
          <div class="quick-amount" data-amount="0.1">0.1 STX</div>
          <div class="quick-amount" data-amount="0.5">0.5 STX</div>
          <div class="quick-amount" data-amount="1">1 STX</div>
          <div class="quick-amount" data-amount="5">5 STX</div>
        </div>
      </div>

      <div class="input-group">
        <label for="amount" class="section-label">Custom Amount (STX)</label>
        <input 
          id="amount" 
          type="number" 
          step="0.000001" 
          min="0.000001"
          placeholder="Enter amount in STX"
          autocomplete="off"
        />
      </div>

      <!-- NEW: Message Input (Clarity 4 feature) -->
      <div class="input-group">
        <label for="message" class="section-label">
          ğŸ’¬ Add Message (Optional - Clarity 4)
          <span class="feature-new">NEW</span>
        </label>
        <textarea 
          id="message" 
          maxlength="280"
          placeholder="Add a custom message to your tip (up to 280 characters)..."
          rows="3"
        ></textarea>
        <div class="char-count">
          <span id="charCount">0</span> / 280 characters
        </div>
      </div>

      <button class="btn btn-primary" id="sendTipBtn">
        <span class="btn-icon">ğŸ’¸</span>
        <span id="sendTipBtnText">Send Tip</span>
      </button>

      <!-- Premium Achievement -->
      <div class="premium-info" id="premiumInfo" style="display: none;">
        <p>ğŸ¯ Tip 10+ STX total to become a Premium Tipper!</p>
        <div class="progress-bar">
          <div class="progress-fill" id="premiumProgress"></div>
        </div>
        <p class="progress-text" id="premiumProgressText">0 / 10 STX</p>
      </div>

      <!-- Owner-only Withdraw Button -->
      <button id="withdrawBtn" class="btn btn-secondary" style="display: none;">
        <span class="btn-icon">â¬‡ï¸</span>
        <span>Withdraw to Owner Wallet</span>
      </button>

      <button class="btn btn-secondary" id="refreshBtn">
        <span class="btn-icon">ğŸ”„</span>
        <span>Refresh Stats</span>
      </button>

      <button class="btn btn-secondary" id="disconnectBtn">
        <span class="btn-icon">ğŸ”Œ</span>
        <span>Disconnect Wallet</span>
      </button>
    </div>

    <!-- Status Messages -->
    <div class="status" id="status"></div>

    <!-- Footer -->
    <footer class="footer">
      <p>Built on <strong>Stacks</strong> â€¢ Secured by <strong>Bitcoin</strong></p>
      <p>Enhanced with <strong>Clarity 4</strong> â€¢ On-chain Memos & Messages</p>
      <p class="footer-links">
        <a href="https://github.com/CryptoExplor/stacks-tip-jar" target="_blank" rel="noopener">GitHub</a>
        <span>â€¢</span>
        <a href="https://docs.stacks.co/whats-new/clarity-4-is-now-live" target="_blank" rel="noopener">Clarity 4 Docs</a>
        <span>â€¢</span>
        <a href="https://stacks.co" target="_blank" rel="noopener">Stacks.co</a>
      </p>
    </footer>
  </div>

  <script type="module" src="/main.js"></script>
</body>
</html>
